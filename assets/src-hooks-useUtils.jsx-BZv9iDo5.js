const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/src-controller-CRUDFirestore.js-CQg5jOlm.js","assets/pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js","assets/pnpm-react@18.3.1--FUz9cRTN.js","assets/pnpm-@babel_runtime@7.25.0--CyFcdsuD.js","assets/pnpm-refractor@3.6.0--CXVGWoH1.js","assets/pnpm-hastscript@6.0.0--DUsoOKIx.js","assets/pnpm-property-information@5.6.0--BaUulPWZ.js","assets/pnpm-xtend@4.0.2--CeaPpq3n.js","assets/pnpm-space-separated-tokens@1.1.5--CMBzgJJ4.js","assets/pnpm-comma-separated-tokens@1.0.8--DgTuumFk.js","assets/pnpm-hast-util-parse-selector@2.2.5--Cqsfuk9Y.js","assets/pnpm-parse-entities@2.0.0--Cz6FRF7l.js","assets/pnpm-character-entities-legacy@1.1.4--BW45UVHJ.js","assets/pnpm-character-reference-invalid@1.1.4--AKrgFUtc.js","assets/pnpm-is-decimal@1.0.4--Dxw1ZLrO.js","assets/pnpm-is-hexadecimal@1.0.4--Bc6OsCR9.js","assets/pnpm-is-alphanumerical@1.0.4--VupdbT_8.js","assets/pnpm-is-alphabetical@1.0.4--BlcIJk-E.js","assets/pnpm-prismjs@1.27.0--l2mXeTxv.js","assets/src-controller-serverSource.js-Cl8oyjhr.js","assets/src-lib-myUtils.js-dn8px5wY.js"])))=>i.map(i=>d[i]);
import{_ as g}from"./pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js";import{r as T}from"./pnpm-react@18.3.1--FUz9cRTN.js";import{u as c}from"./pnpm-zustand@4.5.4_@types_react@18.3.3_react@18.3.1--EhdkWrrw.js";import{u as f}from"./src-store-appStore.js-CeccZLF4.js";import{u as h,f as E,s as S}from"./src-store-useChatsStore.js-D4_VXnQ2.js";import{u as P}from"./src-hooks-useOnlineStatus.jsx-6CQSTZAH.js";import{u as H}from"./src-store-useSettingsStore.js-CTILZtIi.js";import{getDeviceType as k}from"./src-lib-myUtils.js-dn8px5wY.js";const A=()=>{const[t,s,r,a]=h(c(n=>[n.setHoldChats,n.stillHold,n.setStillHold,n.setTriggerClearHolding]));return()=>{if(s)r(!1),t([]),a();else return}},R=({chat:t,holding:s,setHolding:r})=>{const[a,l,n,o]=h(c(d=>[d.holdChats,d.setHoldChats,d.stillHold,d.setStillHold]));let e;const u=()=>{e&&!n&&(o(!0),S(!0),l([...a,t]),r(!0)),e=!1};return{handleHoldChatStart:()=>{n||(e=!0,setTimeout(()=>{u()},1e3))},handleHoldChatEnd:()=>{e=!1},handleClickHoldChat:()=>{if(n)s&&!E&&(r(!1),l([...a].filter(d=>d.time!==t.time)),a.length===1&&o(!1)),s||(r(!0),l([...a,t])),S(!1);else return}}},V=()=>{const[t,s,r]=h(c(e=>[e.chats,e.setChats,e.setChatsMemory])),[a]=f(c(e=>[e.userId])),[l]=h(c(e=>[e.holdChats])),n=A();return async()=>{let e=t.slice();for(let i=0;i<l.length;i++)e=e.filter(d=>d.time!==l[i].time);const u=e.map(i=>({role:i.position==="right"?"user":"assistant",content:i.message}));r(u);const{deleteSomeChatsInFirestore:C}=await g(async()=>{const{deleteSomeChatsInFirestore:i}=await import("./src-controller-CRUDFirestore.js-CQg5jOlm.js");return{deleteSomeChatsInFirestore:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]));C(a,e,l),s(e),n()}},j=()=>{const t=P(),[s]=f(c(o=>[o.userId])),[r,a,l]=h(c(o=>[o.chats,o.setChats,o.setChatsMemory]));return async()=>{const{deleteAllChatsInFirestore:o}=await g(async()=>{const{deleteAllChatsInFirestore:e}=await import("./src-controller-CRUDFirestore.js-CQg5jOlm.js");return{deleteAllChatsInFirestore:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]));t&&o(s,r),a([]),l([])}},q=()=>{const[t,s,r]=f(c(o=>[o.userId,o.setUserId,o.setLoadingMessages])),[a,l]=h(c(o=>[o.setChats,o.setChatsMemory]));return async()=>{try{const{addNewUserToFirestoreIfNotExists:e,uploadSeenHistory:u,getAllChatsFromFirestore:C,getAllChatsMemoryFromFirestore:i}=await g(async()=>{const{addNewUserToFirestoreIfNotExists:M,uploadSeenHistory:F,getAllChatsFromFirestore:w,getAllChatsMemoryFromFirestore:_}=await import("./src-controller-CRUDFirestore.js-CQg5jOlm.js");return{addNewUserToFirestoreIfNotExists:M,uploadSeenHistory:F,getAllChatsFromFirestore:w,getAllChatsMemoryFromFirestore:_}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])),m=await e(),[d,p]=await Promise.all([C(m),i(m),u(m)]),{chats:y,newUserId:I}=d;localStorage.setItem("senAi-userId",I),s(I),a(y),l(p),r(!1)}catch(e){console.log("An error occured : ",e)}localStorage.getItem("senAi-userId")===t||s(localStorage.getItem("senAi-userId"))}},z=()=>{const t=A();return r=>{r.keyCode===27&&t()}},B=()=>{const[t,s]=H(c(a=>[a.darkMode,a.setDarkMode]));return()=>{t?(localStorage.setItem("senAi-theme","light"),s(!1)):(localStorage.setItem("senAi-theme","dark"),s(!0))}},G=()=>{const[t]=H(c(r=>[r.botLanguage]));let s="";return t==="Auto"&&(s="Please Answer Me"),t==="English"&&(s="Please Answer Me In English Language"),t==="Indonesia"&&(s="Please Answer Me In Informal Indonesian Language"),s},J=()=>{const t=k(),[s]=T.useState(t==="Android"||t==="IOS");return s};export{A as a,B as b,j as c,V as d,R as e,q as f,z as g,J as h,G as u};
