const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/src-controller-CRUDFirestore.js-D4ksoFTk.js","assets/pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js","assets/pnpm-react@18.3.1--FUz9cRTN.js","assets/pnpm-@babel_runtime@7.25.0--CyFcdsuD.js","assets/pnpm-refractor@3.6.0--CXVGWoH1.js","assets/pnpm-hastscript@6.0.0--DUsoOKIx.js","assets/pnpm-property-information@5.6.0--BaUulPWZ.js","assets/pnpm-xtend@4.0.2--CeaPpq3n.js","assets/pnpm-space-separated-tokens@1.1.5--CMBzgJJ4.js","assets/pnpm-comma-separated-tokens@1.0.8--DgTuumFk.js","assets/pnpm-hast-util-parse-selector@2.2.5--Cqsfuk9Y.js","assets/pnpm-parse-entities@2.0.0--Cz6FRF7l.js","assets/pnpm-character-entities-legacy@1.1.4--BW45UVHJ.js","assets/pnpm-character-reference-invalid@1.1.4--AKrgFUtc.js","assets/pnpm-is-decimal@1.0.4--Dxw1ZLrO.js","assets/pnpm-is-hexadecimal@1.0.4--Bc6OsCR9.js","assets/pnpm-is-alphanumerical@1.0.4--VupdbT_8.js","assets/pnpm-is-alphabetical@1.0.4--BlcIJk-E.js","assets/pnpm-prismjs@1.27.0--l2mXeTxv.js","assets/src-controller-serverSource.js-Cl8oyjhr.js","assets/src-lib-myUtils.js-B2cOH3lS.js"])))=>i.map(i=>d[i]);
import{_ as g}from"./pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js";import{u as d}from"./pnpm-zustand@4.5.4_@types_react@18.3.3_react@18.3.1--EhdkWrrw.js";import{u as S}from"./src-store-appStore.js-CAdzJ0y8.js";import{u,f as w,s as H}from"./src-store-useChatsStore.js-D4_VXnQ2.js";import{u as F}from"./src-hooks-useOnlineStatus.jsx-6CQSTZAH.js";import{u as A}from"./src-store-useSettingsStore.js-nrdVV1X2.js";const _=()=>{const[s,t,r,a]=u(d(o=>[o.setHoldChats,o.stillHold,o.setStillHold,o.setTriggerClearHolding]));return()=>{if(t)r(!1),s([]),a();else return}},k=({chat:s,holding:t,setHolding:r})=>{const[a,n,o,l]=u(d(c=>[c.holdChats,c.setHoldChats,c.stillHold,c.setStillHold]));let e;const m=()=>{e&&!o&&(l(!0),H(!0),n([...a,s]),r(!0)),e=!1};return{handleHoldChatStart:()=>{o||(e=!0,setTimeout(()=>{m()},1e3))},handleHoldChatEnd:()=>{e=!1},handleClickHoldChat:()=>{if(o)t&&!w&&(r(!1),n([...a].filter(c=>c.time!==s.time)),a.length===1&&l(!1)),t||(r(!0),n([...a,s])),H(!1);else return}}},D=()=>{const[s,t,r]=u(d(e=>[e.chats,e.setChats,e.setChatsMemory])),[a]=S(d(e=>[e.userId])),[n]=u(d(e=>[e.holdChats])),o=_();return async()=>{let e=s.slice();for(let i=0;i<n.length;i++)e=e.filter(c=>c.time!==n[i].time);const m=e.map(i=>({role:i.position==="right"?"user":"assistant",content:i.message}));r(m);const{deleteSomeChatsInFirestore:C}=await g(async()=>{const{deleteSomeChatsInFirestore:i}=await import("./src-controller-CRUDFirestore.js-D4ksoFTk.js");return{deleteSomeChatsInFirestore:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]));C(a,e,n),t(e),o()}},U=()=>{const s=F(),[t]=S(d(o=>[o.userId])),[r,a]=u(d(o=>[o.chats,o.setChats]));return async()=>{const{deleteAllChatsInFirestore:o}=await g(async()=>{const{deleteAllChatsInFirestore:l}=await import("./src-controller-CRUDFirestore.js-D4ksoFTk.js");return{deleteAllChatsInFirestore:l}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]));s&&o(t,r),a([])}},v=()=>{const[s,t,r]=S(d(l=>[l.userId,l.setUserId,l.setLoadingMessages])),[a,n]=u(d(l=>[l.setChats,l.setChatsMemory]));return async()=>{try{const{addNewUserToFirestoreIfNotExists:e,uploadSeenHistory:m}=await g(async()=>{const{addNewUserToFirestoreIfNotExists:f,uploadSeenHistory:I}=await import("./src-controller-CRUDFirestore.js-D4ksoFTk.js");return{addNewUserToFirestoreIfNotExists:f,uploadSeenHistory:I}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])),{getAllChatsFromFirestore:C,getAllChatsMemoryFromFirestore:i}=await g(async()=>{const{getAllChatsFromFirestore:f,getAllChatsMemoryFromFirestore:I}=await import("./src-controller-CRUDFirestore.js-D4ksoFTk.js");return{getAllChatsFromFirestore:f,getAllChatsMemoryFromFirestore:I}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])),h=await e();localStorage.setItem("senAi-userId",h),t(h);const[c,p]=await Promise.all([C(h),i(h),m(h)]);a(c),n(p),r(!1)}catch(e){console.log("An error occured : ",e)}localStorage.getItem("senAi-userId")===s||t(localStorage.getItem("senAi-userId"))}},N=()=>{const s=_();return r=>{r.keyCode===27&&s()}},O=()=>{const[s,t]=A(d(a=>[a.darkMode,a.setDarkMode]));return()=>{s?(localStorage.setItem("senAi-theme","light"),t(!1)):(localStorage.setItem("senAi-theme","dark"),t(!0))}},R=()=>{const[s]=A(d(r=>[r.botLanguage]));let t="";return s==="Auto"&&(t="Please Answer Me"),s==="English"&&(t="Please Answer Me In English Language"),s==="Indonesia"&&(t="Please Answer Me In Informal Indonesian Language"),t};export{_ as a,O as b,U as c,D as d,k as e,v as f,N as g,R as u};
