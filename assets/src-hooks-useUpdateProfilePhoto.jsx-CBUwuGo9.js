const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/src-controller-CRUDFirestore.js-CZR2B6qO.js","assets/pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js","assets/pnpm-react@18.3.1--FUz9cRTN.js","assets/pnpm-@babel_runtime@7.25.0--CyFcdsuD.js","assets/pnpm-refractor@3.6.0--CXVGWoH1.js","assets/pnpm-hastscript@6.0.0--DUsoOKIx.js","assets/pnpm-property-information@5.6.0--BaUulPWZ.js","assets/pnpm-xtend@4.0.2--CeaPpq3n.js","assets/pnpm-space-separated-tokens@1.1.5--CMBzgJJ4.js","assets/pnpm-comma-separated-tokens@1.0.8--DgTuumFk.js","assets/pnpm-hast-util-parse-selector@2.2.5--Cqsfuk9Y.js","assets/pnpm-parse-entities@2.0.0--Cz6FRF7l.js","assets/pnpm-character-entities-legacy@1.1.4--BW45UVHJ.js","assets/pnpm-character-reference-invalid@1.1.4--AKrgFUtc.js","assets/pnpm-is-decimal@1.0.4--Dxw1ZLrO.js","assets/pnpm-is-hexadecimal@1.0.4--Bc6OsCR9.js","assets/pnpm-is-alphanumerical@1.0.4--VupdbT_8.js","assets/pnpm-is-alphabetical@1.0.4--BlcIJk-E.js","assets/pnpm-prismjs@1.27.0--l2mXeTxv.js","assets/src-controller-serverSource.js-q3Bpf1-e.js","assets/src-lib-myUtils.js-B3UxZQ32.js","assets/src-components-ui-use-toast.js-w7cDmHIs.js"])))=>i.map(i=>d[i]);
import{_ as z}from"./pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js";import{t as a}from"./src-components-ui-use-toast.js-w7cDmHIs.js";import{u as I}from"./src-store-appStore.js-CeccZLF4.js";import{u as v}from"./src-store-useSettingsStore.js-DBU6w3vm.js";import{u as c}from"./pnpm-zustand@4.5.4_@types_react@18.3.3_react@18.3.1--EhdkWrrw.js";import{i as C}from"./pnpm-browser-image-compression@2.0.2--BzWLnoYn.js";import{u as x}from"./pnpm-react-i18next@15.0.1_i18next@23.12.2_react-dom@18.3.1_react@18.3.1__react@18.3.1--C-fP4VmU.js";import{a as N}from"./pnpm-react-router@6.26.0_react@18.3.1--BYg1aRBq.js";const E=()=>{const[n]=I(c(e=>[e.userId])),[d,f,g,h,m,u]=v(c(e=>[e.setProfilePhotoUrl,e.setCustomProfilePhotoUrl,e.setCustomPPFileName,e.customPPFileName,e.setLoadingCompressImage,e.setLoadingUploadImage])),{t:r}=x(),_=N(),U=async e=>{if(e.size/1024<200)return e;{const s={maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0};let t=e;try{for(;;){const o=await C(t,s);if(t=o,!(o.size/1024>200))break}}catch(o){a({description:r("error_compressing_image"),duration:3e3,variant:"destructive"}),console.log(o)}return t}};return async e=>{e.toBlob(async l=>{const i=new FormData;m(!0);const s=await U(l);m(!1),i.append("image",s,`${n}-profilePhotoUpdate.jpg`);const{updateProfilePhoto:t,updatePPUrlInFirestore:o}=await z(async()=>{const{updateProfilePhoto:S,updatePPUrlInFirestore:w}=await import("./src-controller-CRUDFirestore.js-CZR2B6qO.js");return{updateProfilePhoto:S,updatePPUrlInFirestore:w}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]));u(!0);const{PPFileName:p,newPPUrl:P}=await t(i),F=await o(n,P,p,h,!0);u(!1),F?(a({description:r("update_pp_success"),duration:3e3}),d(P),f(!0),g(p)):a({description:r("update_pp_failed"),variant:"destructive",duration:3e3}),_("/settings")},"image/jpeg")}};export{E as u};
