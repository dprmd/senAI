const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/src-controller-CRUDFirestore.js-DWHzvynk.js","assets/pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js","assets/pnpm-react@18.3.1--FUz9cRTN.js","assets/pnpm-@babel_runtime@7.25.0--CyFcdsuD.js","assets/pnpm-refractor@3.6.0--CXVGWoH1.js","assets/pnpm-hastscript@6.0.0--DUsoOKIx.js","assets/pnpm-property-information@5.6.0--BaUulPWZ.js","assets/pnpm-xtend@4.0.2--CeaPpq3n.js","assets/pnpm-space-separated-tokens@1.1.5--CMBzgJJ4.js","assets/pnpm-comma-separated-tokens@1.0.8--DgTuumFk.js","assets/pnpm-hast-util-parse-selector@2.2.5--Cqsfuk9Y.js","assets/pnpm-parse-entities@2.0.0--Cz6FRF7l.js","assets/pnpm-character-entities-legacy@1.1.4--BW45UVHJ.js","assets/pnpm-character-reference-invalid@1.1.4--AKrgFUtc.js","assets/pnpm-is-decimal@1.0.4--Dxw1ZLrO.js","assets/pnpm-is-hexadecimal@1.0.4--Bc6OsCR9.js","assets/pnpm-is-alphanumerical@1.0.4--VupdbT_8.js","assets/pnpm-is-alphabetical@1.0.4--BlcIJk-E.js","assets/pnpm-prismjs@1.27.0--l2mXeTxv.js","assets/src-controller-serverSource.js-BlEMbUva.js","assets/src-lib-myUtils.js-JOuRjfEv.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js";import{r as N}from"./pnpm-react@18.3.1--FUz9cRTN.js";import{u as d}from"./pnpm-zustand@4.5.4_@types_react@18.3.3_react@18.3.1--EhdkWrrw.js";import{u as P}from"./src-store-appStore.js-CeccZLF4.js";import{u,f as v,s as S}from"./src-store-useChatsStore.js-D4_VXnQ2.js";import{u as b}from"./src-hooks-useOnlineStatus.jsx-6CQSTZAH.js";import{u as I}from"./src-store-useSettingsStore.js--zqtBzO6.js";import{getDeviceType as O}from"./src-lib-myUtils.js-JOuRjfEv.js";const H=()=>{const[e,t,o,r]=u(d(a=>[a.setHoldChats,a.stillHold,a.setStillHold,a.setTriggerClearHolding]));return()=>{if(t)o(!1),e([]),r();else return}},J=({chat:e,holding:t,setHolding:o})=>{const[r,c,a,n]=u(d(h=>[h.holdChats,h.setHoldChats,h.stillHold,h.setStillHold]));let s;const C=()=>{s&&!a&&(n(!0),S(!0),c([...r,e]),o(!0)),s=!1};return{handleHoldChatStart:()=>{a||(s=!0,setTimeout(()=>{C()},1e3))},handleHoldChatEnd:()=>{s=!1},handleClickHoldChat:()=>{if(a)t&&!v&&(o(!1),c([...r].filter(h=>h.time!==e.time)),r.length===1&&n(!1)),t||(o(!0),c([...r,e])),S(!1);else return}}},K=()=>{const[e,t,o]=u(d(s=>[s.chats,s.setChats,s.setChatsMemory])),[r]=P(d(s=>[s.userId])),[c]=u(d(s=>[s.holdChats])),a=H();return async()=>{let s=e.slice();for(let i=0;i<c.length;i++)s=s.filter(h=>h.time!==c[i].time);const C=s.map(i=>({role:i.position==="right"?"user":"assistant",content:i.message}));o(C);const{deleteSomeChatsInFirestore:l}=await f(async()=>{const{deleteSomeChatsInFirestore:i}=await import("./src-controller-CRUDFirestore.js-DWHzvynk.js");return{deleteSomeChatsInFirestore:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]));l(r,s,c),t(s),a()}},Q=()=>{const e=b(),[t]=P(d(n=>[n.userId])),[o,r,c]=u(d(n=>[n.chats,n.setChats,n.setChatsMemory]));return async()=>{const{deleteAllChatsInFirestore:n}=await f(async()=>{const{deleteAllChatsInFirestore:s}=await import("./src-controller-CRUDFirestore.js-DWHzvynk.js");return{deleteAllChatsInFirestore:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]));e&&n(t,o),r([]),c([])}},W=()=>{const[e,t,o]=P(d(l=>[l.userId,l.setUserId,l.setLoadingMessages])),[r,c]=u(d(l=>[l.setChats,l.setChatsMemory])),[a,n,s]=I(d(l=>[l.setCustomPPFileName,l.setCustomProfilePhotoUrl,l.setProfilePhotoUrl]));return async()=>{try{const{addNewUserToFirestoreIfNotExists:i,uploadSeenHistory:g,getAllChatsFromFirestore:h,getAllChatsMemoryFromFirestore:A,getPPUrl:p}=await f(async()=>{const{addNewUserToFirestoreIfNotExists:U,uploadSeenHistory:E,getAllChatsFromFirestore:k,getAllChatsMemoryFromFirestore:D,getPPUrl:L}=await import("./src-controller-CRUDFirestore.js-DWHzvynk.js");return{addNewUserToFirestoreIfNotExists:U,uploadSeenHistory:E,getAllChatsFromFirestore:k,getAllChatsMemoryFromFirestore:D,getPPUrl:L}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])),m=await i();localStorage.setItem("senAi-userId",m),t(m);const[y,F,M]=await Promise.all([h(m),A(m),p(m),g(m)]),{customPPUrl:w,PPUrl:_,PPFileName:T}=M;n(w),s(_),a(T),r(y),c(F),o(!1)}catch(i){console.log("An error occured : ",i)}localStorage.getItem("senAi-userId")===e||t(localStorage.getItem("senAi-userId"))}},X=()=>{const e=H();return o=>{o.keyCode===27&&e()}},Y=()=>{const[e,t]=I(d(r=>[r.darkMode,r.setDarkMode]));return()=>{e?(localStorage.setItem("senAi-theme","light"),t(!1)):(localStorage.setItem("senAi-theme","dark"),t(!0))}},Z=()=>{const[e]=I(d(o=>[o.botLanguage]));let t="";return e==="Auto"&&(t="Please Answer Me"),e==="English"&&(t="Please Answer Me In English Language"),e==="Indonesia"&&(t="Please Answer Me In Informal Indonesian Language"),t},$=()=>{const e=O(),[t]=N.useState(e==="Android"||e==="IOS");return t};export{H as a,Y as b,Q as c,K as d,J as e,W as f,X as g,$ as h,Z as u};
