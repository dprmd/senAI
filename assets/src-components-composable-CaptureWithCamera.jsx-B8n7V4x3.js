import{r as a,j as e}from"./pnpm-react@18.3.1--FUz9cRTN.js";import{u as C}from"./src-store-appStore.js-CeccZLF4.js";import{u as j}from"./pnpm-zustand@4.5.4_@types_react@18.3.3_react@18.3.1--EhdkWrrw.js";import{t as w}from"./src-components-ui-use-toast.js-w7cDmHIs.js";import{D as d}from"./src-components-svg-DynamicSvg.jsx--Xms7Bki.js";import{a as k}from"./pnpm-react-router@6.26.0_react@18.3.1--BYg1aRBq.js";import{u as b}from"./pnpm-react-i18next@15.0.1_i18next@23.12.2_react-dom@18.3.1_react@18.3.1__react@18.3.1--C-fP4VmU.js";const H=()=>{const[f]=C(j(r=>[r.isCaptureCamera])),h=k(),{t:x}=b(),s=a.useRef(null),t=a.useRef(null),u=a.useRef(null),[n,m]=a.useState(!1),p=()=>{const r=s.current.videoWidth/s.current.videoHeight,v=t.current.width/t.current.height;let c,i,l,o;v>r?(i=t.current.height,c=t.current.height*r,l=(t.current.width-c)/2,o=0):(c=t.current.width,i=t.current.width/r,l=0,o=(t.current.height-i)/2),u.current.drawImage(s.current,l,o,c,i),m(!0)},g=()=>{};return a.useEffect(()=>{f||h("/settings")},[]),a.useEffect(()=>{u.current=t.current.getContext("2d"),navigator.mediaDevices.getUserMedia({video:!0}).then(r=>{s.current.srcObject=r}).catch(()=>{w({description:x("camera_allow_false"),variant:"destructive",time:3e3})})},[]),e.jsxs("div",{className:"min-w-screen max-w-screen flex max-h-screen min-h-screen flex-col md:flex-row",children:[e.jsxs("div",{className:"flex flex-1 items-center justify-center",children:[e.jsx("video",{ref:s,className:`h-full w-full ${n?"hidden":"block"}`,autoPlay:!0,children:e.jsx("track",{kind:"captions"})}),e.jsx("canvas",{ref:t,className:`h-full w-full ${n?"block":"hidden"}`})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 p-6 md:flex-col","aria-hidden":!0,children:[n&&e.jsx("div",{className:"cursor-pointer rounded-full bg-red-600 p-3 font-bold text-slate-100 dark:bg-red-400 dark:text-slate-900",onClick:()=>{m(!1)},"aria-hidden":!0,children:e.jsx(d,{name:"XLg",className:"h-8 w-8"})}),e.jsx("div",{className:"cursor-pointer rounded-full bg-green-600 p-3 font-bold text-slate-100 dark:bg-green-400 dark:text-slate-900",onClick:p,"aria-hidden":!0,children:e.jsx(d,{name:"Camera",className:"h-8 w-8"})}),n&&e.jsx("div",{className:"cursor-pointer rounded-full bg-blue-600 p-3 font-bold text-slate-100 dark:bg-blue-400 dark:text-slate-900",onClick:g,"aria-hidden":!0,children:e.jsx(d,{name:"Check2",className:"h-8 w-8"})})]})]})};export{H as C};
